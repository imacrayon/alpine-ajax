<html>
<!-- Using a <blockquote> because it's an obscure tag -->
<!-- which allows us to use document.querySelector()  -->
<!-- with generic tags freely inside Cypress tests.   -->
<blockquote id="root">
  <!-- This is where our test subjects will be injected. -->
</blockquote>

<script>
  root = document.querySelector('#root')

  // We aren't loading Alpine directly because we are expecting
  // Cypress to inject HTML into "#root", THEN we'll call
  // this function from Cypress to boot everything up.
  root.bootAlpine = (options) => {
    let script = document.createElement('script')
    script.type = 'module'
    script.innerHTML = `
      import Alpine from '../../node_modules/alpinejs/dist/module.esm.js';
      import ajax from '../../dist/goblin-mode.esm.js';

      Alpine.plugin(ajax.configure(${JSON.stringify(options)}));
      window.Alpine = Alpine;
      Alpine.start();
    `;
    root.after(script)
  }
</script>

</html>
